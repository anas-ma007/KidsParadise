<div class="d-md-flex half">
    <div class="bg" style="background-image: url('https://res.cloudinary.com/dsjm0ey22/image/upload/v1685599517/jwt-authentication_d935q8.png');"></div>
    <div class="contents">
        <br>
        <br>

        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-12">
                    <div class="form-block mx-auto">
                        <div class="text-center mb-3">
                            <h4 class="text-uppercase">Signup to <strong>Kids Paradise</strong></h4>
                        </div>
                        <div class="mb-0">

                            <% if (message) { %>
                                <div class="alert alert-danger"><%= message %></div>
                            <% } %>
                            


                            <form action="/signup" method="post">
                                <div class="form-group first">
                                    <label for="username">Enter Your Name</label>
                                    <input id="nameId" type="text" class="form-control "
                                        placeholder="Firstname Secondname" onkeyup="validateName()" name="name"
                                        style=" height: 40px;">
                                    <span id="name-error" class="validation-label text-danger"></span>

                                </div>

                                <div class="form-group first">
                                    <label for="username">Email</label>
                                    <input type="email" id="emailId" class="form-control"
                                        placeholder="your-email@gmail.com" onkeyup="validateEmail()" name="email"
                                        style=" height: 40px;">
                                    <span id="email-error" class="validation-label text-danger"></span>

                                </div>

                                <div class="form-group last mb-3">
                                    <label for="password">Mobile No</label>
                                    <input type="tel" id="mobileId" class="form-control"
                                        placeholder="Mobile Number without Country Code" onkeyup="validateMobNo()"
                                        name="mobile" style=" height: 40px;">
                                    <span id="mobileNo-error" class="validation-label text-danger"></span>

                                </div>


                                <div class="form-group last mb-3">
                                    <label for="password">Enter Password</label>
                                    <input type="password" id="passwordId" class="form-control"
                                        placeholder="Enter Password" onkeyup="validatePassword()" name="password"
                                        style=" height: 40px;">
                                    <span id="password-error" class="validation-label text-danger"></span>

                                </div>
                                <div class="form-group last mb-3">
                                    <label for="password">Re-Enter Password</label>
                                    <input type="password" id="confirmPasswordId" class="form-control"
                                        placeholder="Re-enter Password" onkeyup="validateConfirmPW()"
                                        style=" height: 40px;">
                                    <span id="confirm-error" class="validation-label text-danger"></span>


                                </div>

                                <div class="d-sm-flex mb-2 align-items-center">

                                    <span class="ml-auto"><a href="/login" class="forgot-pass">Already have an account
                                            ?</a></span>
                                </div>

                                <div class="d-sm-flex align-items-center">
                                    <button type="submit" class="btn btn-block py-2 btn-primary"
                                        onclick="return validateForm()">SIGN UP</button>
                                    <span id="submit-error" class="validation-label text-danger"></span>
                                </div>




                            </form>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // USER SIGNUP VALIDATION

    var nameError = document.getElementById('name-error');
    var emailError = document.getElementById('email-error');
    var mobileNoError = document.getElementById('mobileNo-error');
    var passwordError = document.getElementById('password-error');
    var confirmError = document.getElementById('confirm-error');
    var submitError = document.getElementById('submit-error');

    function validateName() {
        var name = document.getElementById('nameId').value;
        if (name.length == 0) {
            nameError.innerHTML = 'Name is required';
            return false;
        }
        if (!name.match(/^[A-Za-z]+ [A-Za-z]+$/)) {
            nameError.innerHTML = 'Write full name';
            return false;
        }
        nameError.innerHTML = '';
        return true;
    }

    function validateEmail() {
        var email = document.getElementById('emailId').value;
        if (email.length == 0) {
            emailError.innerHTML = 'Email is required';
            return false;
        }
        if (!email.match(/^\w+([\.-]?\w+)@\w+([\.-]?\w+)(\.\w{2,3})+$/)) {
            emailError.innerHTML = 'Email invalid';
            return false;
        }
        emailError.innerHTML = '';
        return true;
    }


    function validateMobNo() {
        let mobileNo = document.getElementById("mobileId").value
        if (mobileNo.length == 0) {
            mobileNoError.innerHTML = "Mobile Number is required";
            return false
        }
        if (!mobileNo.match(/^\d{10}$/)) {
            mobileNoError.innerHTML = "Invalid Mobile Number"
            return false
        }
        mobileNoError.innerHTML = ""
        return true
    }

    function validatePassword() {
        var password = document.getElementById('passwordId').value;
        var passChecker = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/;
        if (password.match(passChecker)) {
            passwordError.innerHTML = '';
            return true;
        } else {
            passwordError.innerHTML = 'required 6-20 character,1 numeric digit, 1 uppercase and 1 lowercase';
            return false;
        }
    }

    function validateConfirmPW() {
        const password = document.getElementById("passwordId").value;
        const password2 = document.getElementById("confirmPasswordId").value
        if (password != password2) {
            confirmError.innerHTML = "Password not match"
            return false
        } else {
            confirmError.innerHTML = " "
            return true
        }
    }

    function validateForm() {
        if (!validateName() || !validateEmail() || !validatePassword() || !validateMobNo()) {
            submitError.style.display = 'flex';
            submitError.style.justifyContent = 'center';
            submitError.innerHTML = 'Please fix all errors to submit';
            setTimeout(() => {
                submitError.style.display = 'none';
            }, 3000);
            return false;
        }
    }

</script>